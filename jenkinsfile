pipeline {
    agent any
    stages {
        stage('Build') {
            steps {
                echo "Use a build automation tool (e.g., Maven) to build the code" 
            
            }
        }
        stage('Unit and Integration Tests') {
            steps { 
                // Run unit tests using JUnit 
                echo "Testing"
                // Run integration tests using a tool like Selenium or JMeter
                // Replace the placeholder commands with actual test commands
              
                // bat 'run_jmeter_tests.bat'
            }
        }
        post {
        always {
            // Send email notification with stage status and logs as attachment
            emailext body: "${currentBuild.result}: Job '${env.JOB_NAME} [${env.BUILD_NUMBER}]'", 
                      recipientProviders: [[$class: 'CulpritsRecipientProvider']], 
                      subject: "Pipeline ${currentBuild.result}: ${env.JOB_NAME}", 
                      to: 'vivekolladapu328@gmail.com',
                      attachmentsPattern: '**/*.log' // Attach all log files
        }
        }
        
    }
}
